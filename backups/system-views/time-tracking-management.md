# 時間追蹤管理系統

本功能旨在替代 Clickup 的計時功能，提供專案時間管理和報表匯出功能，主要用於月度報帳使用。

## 1. 目標用戶

- 需要追蹤時間的專業人士
- 需要按專案計算工時的顧問或工程師
- 中小型公司的專案經理

## 2. 功能概述

### 2.1 專案管理

- 專案基本資訊
  - 名稱
  - 計費設定（是/否）
  - 時薪設定（若為計費專案）
- 任務關聯管理
  - 將任務關聯至專案
  - 批次關聯功能
- 計時追蹤整合
  - 根據專案篩選計時記錄
  - 快速瀏覽每個專案的時間記錄

### 2.2 時間統計

#### 2.2.1 專案時間統計
- 依專案分組
  - 總工時
  - 總金額（若為計費專案）
- 依時間區間篩選
  - 今天/昨天/本週/上週/本月/上月/自訂

#### 2.2.2 工時明細檢視
- 計時記錄清單
  - 專案
  - 任務
  - 開始時間
  - 結束時間
  - 追蹤時間
  - 金額（若為計費專案）

#### 2.2.3 報表匯出功能
- 報表視圖管理
  - 視圖選擇（可預設多個視圖）
  - 預設視圖（默認視圖不可刪除）
  - 視圖名稱設定
  - 儲存/刪除視圖
- 匯出設定對話框
  - 欄位選擇與排序
    - 日期
    - 專案名稱
    - 任務名稱
    - 行動描述
    - 開始時間
    - 結束時間
    - 持續時間（分鐘或小時）
    - 金額
  - 匯出格式選擇
    - CSV
    - XLSX
  - 匯出視圖預覽
- 匯出進度指示器

## 3. 功能需求

### 3.1 專案管理
- 新增、編輯、刪除專案
- 設定專案計費狀態
- 設定專案時薪

### 3.2 時間統計
- 自定義時間區間篩選
- 多維度分群檢視
- 專案/任務多選篩選
- 即時計算總時數與金額

### 3.3 報表匯出
- 自定義匯出欄位
- 支援視圖管理
  - 每個視圖定義欄位選擇和排序
  - 支援預設視圖功能
  - 視圖持久化存儲
- 支援多種檔案格式
  - XLSX (Excel)
  - CSV
- 批次匯出功能

## 4. 非功能需求
- 響應式設計（僅桌面版）
- 資料即時更新
- 匯出效能優化
- 使用者操作記錄保存
- 視圖設定須儲存至後端數據庫

## 5. 使用者流程

### 5.1 專案管理流程
1. 點擊專案管理頁籤
2. 瀏覽現有專案列表
3. 點擊新增專案按鈕
4. 填寫專案資訊
5. 儲存專案設定

### 5.2 時間統計流程
1. 選擇時間區間
2. 選擇分群方式
3. 設定篩選條件
4. 檢視統計結果
5. （可選）調整顯示欄位

### 5.3 報表匯出流程
1. 點擊匯出按鈕
2. 選擇報表視圖或創建新視圖
   - 選擇已儲存視圖
   - 或設定新視圖（欄位選擇、排序、格式）
3. 檢查匯出設定
4. 點擊匯出按鈕
5. 下載完成的報表

### 5.4 視圖管理流程
1. 在匯出對話框選擇「新視圖」
2. 設定視圖名稱
3. 選擇欄位和格式
4. 儲存視圖
5. （可選）刪除現有視圖（預設視圖不可刪除）

## 6. 錯誤處理
- 無效的時間區間選擇
- 無資料的匯出請求
- 檔案格式轉換錯誤
- 網路連線問題
- 視圖管理操作錯誤

## 7. 未來擴展考慮
- 自定義報表模板
- 多語言支援
- 自動化排程匯出
- 更多匯出格式支援 