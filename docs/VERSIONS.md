# 版本控制文檔

## 穩定版本記錄 (2025-04-06)

### 前端
- 新增專注模式功能
  - 計時器啟動後可開啟全屏專注視圖
  - 擬真番茄鐘倒數計時器顯示
  - 深色霧面背景提升專注度
  - 根據剩餘時間變化顏色提示（綠色→橙色→紅色）
- 優化預算使用進度條顯示
  - 合併為單一進度條
  - 清晰分層展示時數和金額信息
  - 保留顏色提示功能（綠色→黃色→紅色）
- 新增專案每月預算上限功能
  - 專案管理頁面可設置預算上限
  - 時間統計頁面顯示預算使用進度條
  - 進度條根據使用情況變色
- 新增時間統計頁籤的專案篩選功能
  - 使用 Autocomplete 多選實現多專案篩選
  - 篩選會同時影響統計顯示和報表匯出
- 已修復 `ProjectManager.js` 中專案 ID 問題
  - 使用 `_id` 從 `stats.projectStats` 中獲取專案標識符
  - 添加了錯誤處理確保不會使用無效 ID

### 後端
- `Project` 模型新增 `monthlyBudgetLimit` 字段
  - 整數類型，默認為 0（表示無上限）
  - 僅在計費專案（isBillable=true）時有效
- `reports.js` 中增強了匯出功能
  - 增加 Bike-GV 視圖使用 24 小時制 (HH:MM-HH:MM) 格式
  - 優化了匯出時的視圖識別邏輯
- `projects.js` 中的關鍵路由已穩定工作
  - `/stats` 路由確保返回標準化的專案 ID (_id)
  - `/stats` 路由支持多專案篩選參數
  - `/:projectId/actions` 路由支持時間範圍篩選

### 已知工作功能
- 專案列表和編輯（含預算上限設定）
- 專案時間統計與篩選
- 預算使用進度顯示 
- 專案行動記錄的展開/收起
- 時間範圍篩選
- 報表匯出 (支持自定義視圖)
- 專注模式計時器

### 改進方向
- 考慮增加錯誤處理和日誌
- 優化時間範圍選擇器
- 改進數據加載狀態的顯示
- 為專注模式添加更多自定義選項

## 修改歷史

### 2025-04-06: 專注模式功能版本
- 新增全屏專注模式，提供擬真番茄鐘計時器
- 添加深色霧面背景設計，提升專注體驗
- 根據剩餘時間自動變化顏色提供視覺提示
- 利用現有計時邏輯，無縫整合進計時功能

### 2025-04-05: 預算顯示優化版本
- 優化預算進度條顯示界面，合併為單一進度條
- 調整信息展示排版，統一展示金額和時數信息
- 保留顏色提示功能（按比例變色）

### 2025-04-04: 預算上限功能版本
- 新增專案每月預算上限字段和相關功能
- 添加時間統計頁面的預算使用進度條顯示
- 專案列表頁面顯示預算上限信息

### 2025-04-03: 專案篩選增強版本
- 新增時間統計頁面的專案多選篩選功能
- 修改 Bike-GV 視圖的時間格式為 24 小時制 (HH:MM-HH:MM)
- 優化報表匯出處理篩選專案 ID 的邏輯

### 2025-04-02: 穩定版本
- 修復專案統計頁面中專案 ID 傳遞問題
- 確保後端 API 處理專案 ID 和時間範圍參數
- 增強前端錯誤處理 